<a id = "jump">[首页](/README.md)</a>

<!-- TOC -->

- [jsp 有哪些内置对象？作用分别是什么？](#jsp-有哪些内置对象作用分别是什么)
- [jsp 的 4 种作用域？](#jsp-的-4-种作用域)
- [session 和 cookie 有什么区别？](#session-和-cookie-有什么区别)
- [如果客户端禁止 cookie 能实现 session 还能用吗？](#如果客户端禁止-cookie-能实现-session-还能用吗)

<!-- /TOC -->

# jsp 有哪些内置对象？作用分别是什么？

JSP有9个内置对象：

**request**：封装客户端的请求，其中包含来自GET或POST请求的参数；
**response**：封装服务器对客户端的响应；
**pageContext**：通过该对象可以获取其他对象；
**session**：封装用户会话的对象；
**application**：封装服务器运行环境的对象；
**out**：输出服务器响应的输出流对象；
**config**：Web应用的配置对象；
**page**：JSP页面本身（相当于Java程序中的this）；
**exception**：封装页面抛出异常的对象。


[toTop](#jump)


# jsp 的 4 种作用域？

JSP中的四种作用域包括``page``、``request``、``session``和``application``，具体来说：

**page**代表与一个页面相关的对象和属性。

**request**代表与Web客户机发出的一个请求相关的对象和属性。一个请求可能跨越多个页面，涉及多个Web组件；需要在页面显示的临时数据可以置于此作用域。

**session**代表与某个用户与服务器建立的一次会话相关的对象和属性。跟某个用户相关的数据应该放在用户自己的session中。

**application**代表与整个Web应用程序相关的对象和属性，它实质上是跨越整个Web应用程序，包括多个页面、请求和会话的一个全局作用域。


[toTop](#jump)


# session 和 cookie 有什么区别？


由于HTTP协议是无状态的协议，所以服务端需要记录用户的状态时，就需要用某种机制来识具体的用户，这个机制就是``Session``.典型的场景比如购物车，当你点击下单按钮时，由于HTTP协议无状态，所以并不知道是哪个用户操作的，所以服务端要为特定的用户创建了特定的``Session``，用用于标识这个用户，并且跟踪用户，这样才知道购物车里面有几本书。这个``Session``是保存在**服务端**的，有一个唯一标识。在服务端保存``Session``的方法很多，内存、数据库、文件都有。集群的时候也要考虑``Session``的转移，在大型的网站，一般会有专门的``Session``服务器集群，用来保存用户会话，这个时候 ``Session`` 信息都是放在内存的，使用一些缓存服务比如Memcached之类的来放 ``Session``。

服务端如何识别特定的客户？
每次HTTP请求的时候，客户端都会发送相应的``Cookie``信息到服务端。实际上大多数的应用都是用 ``Cookie`` 来实现``Session``跟踪的，第一次创建``Session``的时候，服务端会在HTTP协议中告诉客户端，需要在 ``Cookie`` 里面记录一个``Session ID``，以后每次请求把这个会话ID发送到服务器，我就知道你是谁了。有人问，如果客户端的浏览器禁用了 ``Cookie`` 怎么办？一般这种情况下，会使用一种叫做URL重写的技术来进行会话跟踪，即每次HTTP交互，URL后面都会被附加上一个诸如 ``sid=xxxxx`` 这样的参数，服务端据此来识别用户。

``Cookie``其实还可以用在一些方便用户的场景下，设想你某次登陆过一个网站，下次登录的时候不想再次输入账号了，怎么办？这个信息可以写到``Cookie``里面，访问网站的时候，网站页面的脚本可以读取这个信息，就自动帮你把用户名给填了，能够方便一下用户。这也是``Cookie``名称的由来，给用户的一点甜头。

总结一下：
```Session```是在服务端保存的一个数据结构，用来跟踪用户的状态，这个数据可以保存在集群、数据库、文件中；

```Cookie```是客户端保存用户信息的一种机制，用来记录用户的一些信息，也是实现Session的一种方式。


[toTop](#jump)

# 如果客户端禁止 cookie 能实现 session 还能用吗？

Cookie与 Session，一般认为是两个独立的东西，Session采用的是在服务器端保持状态的方案，而Cookie采用的是在客户端保持状态的方案。但为什么禁用Cookie就不能得到Session呢？因为Session是用Session ID来确定当前对话所对应的服务器Session，而Session ID是通过Cookie来传递的，禁用Cookie相当于失去了Session ID，也就得不到Session了。

假定用户关闭Cookie的情况下使用Session，其实现途径有以下几种：

    设置php.ini配置文件中的“session.use_trans_sid = 1”，或者编译时打开打开了“--enable-trans-sid”选项，让PHP自动跨页传递Session ID。
    手动通过URL传值、隐藏表单传递Session ID。
    用文件、数据库等形式保存Session ID，在跨页过程中手动调用。
